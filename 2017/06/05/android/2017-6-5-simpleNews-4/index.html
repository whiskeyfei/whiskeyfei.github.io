<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.5" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/uploads/apple-touch-icon-next.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png?v=6.0.5">


  <link rel="mask-icon" href="/uploads/logo.svg?v=6.0.5" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.5',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Android" />


<meta name="description" content="Gradle使用 Android Studio 都知道 Gradle，在 SimpleNews 项目中，前期的时候并不是很了解  Gradle 语法等，只是使用 Android Studio 默认的配置来构建，后续也只是关注在功能方向，没有过多的了解 Gradle 使用，趁此重构机会就好好认识 Gradle。  我们来看下维基百科简单了解下概念：  可以看到 Gradle 的优势，我之前也使用过">
<meta name="keywords" content="Android">
<meta property="og:type" content="article">
<meta property="og:title" content="SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总">
<meta property="og:url" content="http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/index.html">
<meta property="og:site_name" content="無名小子的杂货铺">
<meta property="og:description" content="Gradle使用 Android Studio 都知道 Gradle，在 SimpleNews 项目中，前期的时候并不是很了解  Gradle 语法等，只是使用 Android Studio 默认的配置来构建，后续也只是关注在功能方向，没有过多的了解 Gradle 使用，趁此重构机会就好好认识 Gradle。  我们来看下维基百科简单了解下概念：  可以看到 Gradle 的优势，我之前也使用过">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/877678-1e913d27596183e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800">
<meta property="og:updated_time" content="2018-03-14T14:59:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总">
<meta name="twitter:description" content="Gradle使用 Android Studio 都知道 Gradle，在 SimpleNews 项目中，前期的时候并不是很了解  Gradle 语法等，只是使用 Android Studio 默认的配置来构建，后续也只是关注在功能方向，没有过多的了解 Gradle 使用，趁此重构机会就好好认识 Gradle。  我们来看下维基百科简单了解下概念：  可以看到 Gradle 的优势，我之前也使用过">
<meta name="twitter:image" content="http://upload-images.jianshu.io/upload_images/877678-1e913d27596183e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800">






  <link rel="canonical" href="http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总 | 無名小子的杂货铺</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">無名小子的杂货铺</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">越努力越幸运</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
</li>

      

      
    </ul>
  

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:12:30+08:00">2017-06-05</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SimpleNews-系列/" itemprop="url" rel="index"><span itemprop="name">SimpleNews 系列</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><p>使用 Android Studio 都知道 Gradle，在 <a href="">SimpleNews</a> 项目中，前期的时候并不是很了解  Gradle 语法等，只是使用 Android Studio 默认的配置来构建，后续也只是关注在功能方向，没有过多的了解 Gradle 使用，趁此重构机会就好好认识 Gradle。</p>
<!-- break -->
<p>我们来看下维基百科简单了解下概念：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-1e913d27596183e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="image.png"></p>
<p>可以看到 Gradle 的优势，我之前也使用过 Ant 打包，相对于Ant xml 的编写，Gradle 使用简单易理解。</p>
<p>如果我们能不是负责项目的打包或者渠道发布等工作，这里我们了解下 Gradle 常用的基本配置就可以了，也能满足我们的日常需求。</p>
<p>要是想精通的话，建议看看 Gradle for Android 这本书，并动手操练，这里推荐 <a href="http://tools.android.com/tech-docs/new-build-system/user-guide" target="_blank" rel="noopener">Android Gradle 插件中文指南</a></p>
<p> <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a>  项目中使用的 gradle build 版本是 gradle:2.3.2</p>
<p>接下来挨个文件看，项目中的基本上都添加了注释，很容易理解，后续再清理。</p>
<h2 id="基本的-settings-gradle-文件"><a href="#基本的-settings-gradle-文件" class="headerlink" title="基本的 settings.gradle 文件"></a>基本的 settings.gradle 文件</h2><pre><code>include &apos;:app&apos;, &apos;:library&apos;
//包含多个模块即多个module
</code></pre><h2 id="Android-项目级别的-build-gradle-文件"><a href="#Android-项目级别的-build-gradle-文件" class="headerlink" title="Android 项目级别的 build.gradle 文件"></a>Android 项目级别的 build.gradle 文件</h2><pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

//顶级的构建文件，需要到子项目中添加依赖
//应用配置文件，完事之后可以在全局引用
apply from: &quot;config.gradle&quot;
// 中央远程仓库，兼容maven中心仓库
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath &apos;com.android.tools.build:gradle:2.3.2&apos;//项目使用 gradle:2.3.2 版本 build

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
        //不要再这里添加依赖，在各自的module build.gradle中添加依赖
    }
}
//为所有的工程的repositories配置为jcenters，JCenter类似maven库，不需要任何额外的配置
allprojects {
    repositories {
        jcenter()
    }
}

//buildscript 方法是定义了全局的相关属性，repositories定义了jcenter作为仓库。一个仓库代表着你的依赖包的来源，
// 例如maven仓库。dependencies用来定义构建过程。这意味着你不应该在该方法体内定义子模块的依赖包，你仅仅需要定义默认的Android插件就可以了，
// 因为该插件可以让你执行相关Android的tasks。
</code></pre><h2 id="Android-项目-App-级别-build-gradle-文件"><a href="#Android-项目-App-级别-build-gradle-文件" class="headerlink" title="Android 项目 App 级别 build.gradle 文件"></a>Android 项目 App 级别 build.gradle 文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"><span class="comment">//该 plugin 为一个 com.android.application 程序，也就是应用程序，如果你的 plugin 是一个库，那么自然也就是apply plugin: 'com.android.library'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion rootProject.ext.android.compileSdkVersion <span class="comment">//编译的 SDK API 版本</span></span><br><span class="line">    buildToolsVersion rootProject.ext.android.buildToolsVersion <span class="comment">//构建工具版本</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认配置&amp;核心属性，该属性会重写在AndroidManifest.xml中的对应属性</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId rootProject.ext.android.applicationId<span class="comment">//配置包名的</span></span><br><span class="line">        minSdkVersion rootProject.ext.android.minSdkVersion <span class="comment">//支持最小的 SDK 版本</span></span><br><span class="line">        targetSdkVersion rootProject.ext.android.targetSdkVersion</span><br><span class="line">        versionCode rootProject.ext.android.versionCode<span class="comment">//版本号</span></span><br><span class="line">        versionName rootProject.ext.android.versionName<span class="comment">//版本名称</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//构建类型，常用的有release和debug两种</span></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">true</span> <span class="comment">//是否启动混淆</span></span><br><span class="line">            shrinkResources <span class="keyword">true</span> <span class="comment">//是否移除无用资源文件，shrinkResources依赖于minifyEnabled</span></span><br><span class="line">            <span class="comment">// 混淆文件的位置</span></span><br><span class="line">            <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">repositories </span>&#123;</span><br><span class="line">    jcenter()</span><br><span class="line">    maven &#123; url <span class="string">"https://jitpack.io"</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//依赖管理,可以添加远程依赖 和 本地依赖libs等</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">//将libs文件夹中所有的jar文件视为依赖包。</span></span><br><span class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></span><br><span class="line"><span class="function">    testCompile 'junit:junit:4.12'</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="comment">//添加依赖包</span></span></span><br><span class="line"><span class="function">    compile <span class="title">project</span><span class="params">(<span class="string">':library'</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="comment">//依赖远程仓库</span></span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.design</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.cardview</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.circleimageview</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.sufficientlysecure</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Android-项目-Library-级别-build-gradle-文件"><a href="#Android-项目-Library-级别-build-gradle-文件" class="headerlink" title="Android 项目 Library 级别 build.gradle 文件"></a>Android 项目 Library 级别 build.gradle 文件</h2><p>这里的配置基本上和 App 中的配置一样，之前介绍过，使用 config.gradle 来统一全局变量，就不多介绍了，不知道的可以查看第一篇</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">    apply plugin: <span class="string">'com.android.library'</span></span><br><span class="line"></span><br><span class="line">    android &#123;</span><br><span class="line">        compileSdkVersion rootProject.ext.android.compileSdkVersion</span><br><span class="line">        buildToolsVersion rootProject.ext.android.buildToolsVersion</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        defaultConfig &#123;</span><br><span class="line">            minSdkVersion rootProject.ext.android.minSdkVersion</span><br><span class="line">            targetSdkVersion rootProject.ext.android.targetSdkVersion</span><br><span class="line">            versionCode rootProject.ext.android.versionCode</span><br><span class="line">            versionName rootProject.ext.android.versionName</span><br><span class="line">        &#125;</span><br><span class="line">        buildTypes &#123;</span><br><span class="line">            release &#123;</span><br><span class="line">                minifyEnabled <span class="keyword">false</span></span><br><span class="line">                <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class="line"><span class="function">            &#125;</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    dependencies </span>&#123;</span><br><span class="line">        <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.appcompat</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.gson</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.glide</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.okhttp</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.rxandroid</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.eventbus</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function">```    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">## so、jar、aar文件</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">jar：只包含了 class 文件与清单文件，不包含资源文件；</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">aar：包含所有资源，class以及res资源文件。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">aar使用</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">当你构建你的library项目，aar文件将会在 build/output/aar/下生成。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">![image.png]<span class="params">(http://upload-images.jianshu.io/upload_images/<span class="number">877678</span>-b429f767a79b543e.png?imageMogr2/auto-orient/strip%<span class="number">7</span>CimageView2/<span class="number">2</span>/w/<span class="number">1240</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">可以创建一个 aars 文件夹来存放 aar 文件，并将本目录下所有的 aar 文件作为依赖包，例如：</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    repositories </span>&#123;</span><br><span class="line">        flatDir &#123;</span><br><span class="line">            dirs <span class="string">'aars'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">so：用c或者c++写的 library 会被叫做 so 包，Android 插件默认情况下支持<span class="keyword">native</span>包，你需要把.so文件放在对应的文件夹中：</span><br><span class="line"></span><br><span class="line">    app</span><br><span class="line">       ├── AndroidManifest.xml</span><br><span class="line">       └── jniLibs</span><br><span class="line">           ├── armeabi</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           ├── armeabi-v7a</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           ├── mips</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           └── x86</span><br><span class="line">               └── nativelib.so</span><br><span class="line"></span><br><span class="line">使用系统的 load 方法，就能加载，有两种方式，这里就不多介绍了，等用到了在说。</span><br><span class="line"></span><br><span class="line">## 其他文件</span><br><span class="line">#### 1、gradle-wrapper.properties</span><br><span class="line"></span><br><span class="line">    #Fri May 26 10:09:38 CST 2017</span><br><span class="line">    distributionBase=GRADLE_USER_HOME</span><br><span class="line">    distributionPath=wrapper/dists</span><br><span class="line">    zipStoreBase=GRADLE_USER_HOME</span><br><span class="line">    zipStorePath=wrapper/dists</span><br><span class="line">    distributionUrl=https\:<span class="comment">//services.gradle.org/distributions/gradle-3.3-all.zip</span></span><br><span class="line">    #声明gradle的目录与下载路径以及当前项目使用的gradle版本，一般不会更改的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2、proguard-rules.pro</span><br><span class="line"></span><br><span class="line">    每一个 <span class="keyword">module</span> 都会有自己的 proguard-rules.pro 文件，用来编写混淆规则，有一些是不能被混淆的</span><br><span class="line">    例如：一些js注入类是不能被混淆的，否则调用找不到方法。</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">    # Add any project specific keep options here:</span><br><span class="line"></span><br><span class="line">    # If your project uses WebView with JS, uncomment the following</span><br><span class="line">    # and specify the fully qualified class name to the JavaScript interface</span><br><span class="line">    # class:</span><br><span class="line">    #-keepclassmembers class fqcn.of.javascript.interface.for.webview &#123;</span><br><span class="line">    #   public *;</span><br><span class="line">    #&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3、gradle-properties"><a href="#3、gradle-properties" class="headerlink" title="3、gradle.properties"></a>3、gradle.properties</h4><p>说到这个文件就要说到之前的 config.gradle 来统一全局变量，config.gradle 只是一种方式，我们还可以在 gradle.properties 中<br>定义常量。</p>
<p>例如(不是本项目中的使用方式，摘自网络)：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 应用版本名称</span><br><span class="line">VERSION_NAME=<span class="number">1.0</span>.0</span><br><span class="line"># 应用版本号</span><br><span class="line">VERSION_CODE=<span class="number">100</span></span><br><span class="line"># 支持库版本</span><br><span class="line">SUPPORT_LIBRARY=<span class="number">24.2</span>.1</span><br><span class="line"># MIN_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_MIN_SDK_VERSION=<span class="number">14</span></span><br><span class="line"># TARGET_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_TARGET_SDK_VERSION=<span class="number">24</span></span><br><span class="line"># BUILD_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_SDK_VERSION=<span class="number">24</span></span><br><span class="line"># BUILD_TOOLS_VERSION</span><br><span class="line">ANDROID_BUILD_TOOLS_VERSION=<span class="number">24.0</span>.3</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion project.ANDROID_BUILD_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">    buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId project.APPLICATION_ID</span><br><span class="line">        versionCode project.VERSION_CODE as <span class="keyword">int</span></span><br><span class="line">        versionName project.VERSION_NAME</span><br><span class="line">        minSdkVersion project.ANDROID_BUILD_MIN_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">        targetSdkVersion project.ANDROID_BUILD_TARGET_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4、local-properties"><a href="#4、local-properties" class="headerlink" title="4、local.properties"></a>4、local.properties</h4><p>这个比较简单，就是配置项目 NDK、SDK 路径</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文只是简单的介绍了项目中使用的 Gradle 脚本含义和简单用法，只是 Gradle 使用当中的冰山一角，之后会深入打包功能，让项目越来越完善。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://segmentfault.com/a/1190000004229002" target="_blank" rel="noopener">Gradle for Android 第一篇( 从 Gradle 和 AS 开始 )</a></p>
<hr>
<h3 id="SimpleNews-介绍"><a href="#SimpleNews-介绍" class="headerlink" title="SimpleNews 介绍"></a><a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews</a> 介绍</h3><p>A news Android App,based on the Material Design and RxJava 、MVP.Due to changes in the data request logic larger.so,I searate pull out the demo to update, in the original basis to modify the use of RxJava and MVP to rewirete the code starcture.Github <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a></p>
<hr>
<h4 id="SimpleNews-项目的重构之旅其他文章"><a href="#SimpleNews-项目的重构之旅其他文章" class="headerlink" title="SimpleNews 项目的重构之旅其他文章"></a><a href="">SimpleNews 项目的重构之旅其他文章</a></h4><ul>
<li><a href="http://www.jianshu.com/p/d2101119e7b7" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(1) －项目架构定位 &amp; Gradle 全局配置</a></li>
<li><a href="http://www.jianshu.com/p/a658021edea8" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></li>
<li><a href="http://www.jianshu.com/p/de207458f12e" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></li>
<li><a href="http://www.jianshu.com/p/ff777bb4e1d9" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></li>
<li><a href="http://www.jianshu.com/p/3c8c69346acf" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(5) － Android Gradle 打包&amp;混淆应用</a></li>
<li><a href="http://www.jianshu.com/p/37112006f7ed" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(6) － 命名规范 &amp; Android Toolbar</a></li>
<li><a href="http://www.jianshu.com/p/9cc735021b6a" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(7) － 改头换面&amp;深度清理</a></li>
</ul>

      
    </div>

    

    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/uploads/alipay.jpg" alt="無名 支付宝"/>
        <p>支付宝</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>无名</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/" title="SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总">http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/SimpleNews/" rel="tag"># SimpleNews</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/06/02/android/2017-6-1-simpleNews-3/" rel="next" title="SimpleNews 项目的重构之旅(3) －EventBus 接入">
                <i class="fa fa-chevron-left"></i> SimpleNews 项目的重构之旅(3) －EventBus 接入
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/13/android/2017-6-12-simpleNews-5/" rel="prev" title="SimpleNews 项目的重构之旅(5) － Android Gradle 打包&混淆应用">
                SimpleNews 项目的重构之旅(5) － Android Gradle 打包&混淆应用 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/face.jpg"
                alt="無名" />
            
              <p class="site-author-name" itemprop="name">無名</p>
              <p class="site-description motion-element" itemprop="description">记录学习、生活</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">46</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/whiskeyfei" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:whiskeyfei@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.jianshu.com/u/fa272f63280a" target="_blank" title="简书"><i class="fa fa-fw fa-google"></i>简书</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/whiskeyfei" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Gradle"><span class="nav-number">1.</span> <span class="nav-text">Gradle</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#基本的-settings-gradle-文件"><span class="nav-number"></span> <span class="nav-text">基本的 settings.gradle 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Android-项目级别的-build-gradle-文件"><span class="nav-number"></span> <span class="nav-text">Android 项目级别的 build.gradle 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Android-项目-App-级别-build-gradle-文件"><span class="nav-number"></span> <span class="nav-text">Android 项目 App 级别 build.gradle 文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Android-项目-Library-级别-build-gradle-文件"><span class="nav-number"></span> <span class="nav-text">Android 项目 Library 级别 build.gradle 文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3、gradle-properties"><span class="nav-number">0.1.</span> <span class="nav-text">3、gradle.properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4、local-properties"><span class="nav-number">0.2.</span> <span class="nav-text">4、local.properties</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#总结"><span class="nav-number"></span> <span class="nav-text">总结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number"></span> <span class="nav-text">参考</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SimpleNews-介绍"><span class="nav-number">1.</span> <span class="nav-text">SimpleNews 介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SimpleNews-项目的重构之旅其他文章"><span class="nav-number">1.1.</span> <span class="nav-text">SimpleNews 项目的重构之旅其他文章</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">無名</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.5</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.5"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.5"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.5"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.5"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.5"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.5"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.5"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
