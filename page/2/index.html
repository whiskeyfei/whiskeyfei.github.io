<!DOCTYPE html>




<html class="theme-next pisces" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.0.5" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/uploads/apple-touch-icon-next.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicon-32x32.png?v=6.0.5">


  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicon-16x16.png?v=6.0.5">


  <link rel="mask-icon" href="/uploads/logo.svg?v=6.0.5" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.5',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  
  <meta name="keywords" content="Android, Life" />


<meta name="description" content="记录学习、生活">
<meta property="og:type" content="website">
<meta property="og:title" content="無名小子的杂货铺">
<meta property="og:url" content="http://whiskeyfei.github.io/page/2/index.html">
<meta property="og:site_name" content="無名小子的杂货铺">
<meta property="og:description" content="记录学习、生活">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="無名小子的杂货铺">
<meta name="twitter:description" content="记录学习、生活">






  <link rel="canonical" href="http://whiskeyfei.github.io/page/2/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>
  <title>無名小子的杂货铺</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> 

<div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">無名小子的杂货铺</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">越努力越幸运</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
          
  <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
</li>

      
        
        
          
  <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
</li>

      

      
    </ul>
  

  

  
</nav>


  



 </div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/06/05/android/2017-6-5-simpleNews-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/05/android/2017-6-5-simpleNews-4/" itemprop="url">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-05T10:12:30+08:00">2017-06-05</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SimpleNews-系列/" itemprop="url" rel="index"><span itemprop="name">SimpleNews 系列</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Gradle"><a href="#Gradle" class="headerlink" title="Gradle"></a>Gradle</h3><p>使用 Android Studio 都知道 Gradle，在 <a href="">SimpleNews</a> 项目中，前期的时候并不是很了解  Gradle 语法等，只是使用 Android Studio 默认的配置来构建，后续也只是关注在功能方向，没有过多的了解 Gradle 使用，趁此重构机会就好好认识 Gradle。</p>
<!-- break -->
<p>我们来看下维基百科简单了解下概念：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-1e913d27596183e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/800" alt="image.png"></p>
<p>可以看到 Gradle 的优势，我之前也使用过 Ant 打包，相对于Ant xml 的编写，Gradle 使用简单易理解。</p>
<p>如果我们能不是负责项目的打包或者渠道发布等工作，这里我们了解下 Gradle 常用的基本配置就可以了，也能满足我们的日常需求。</p>
<p>要是想精通的话，建议看看 Gradle for Android 这本书，并动手操练，这里推荐 <a href="http://tools.android.com/tech-docs/new-build-system/user-guide" target="_blank" rel="noopener">Android Gradle 插件中文指南</a></p>
<p> <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a>  项目中使用的 gradle build 版本是 gradle:2.3.2</p>
<p>接下来挨个文件看，项目中的基本上都添加了注释，很容易理解，后续再清理。</p>
<h2 id="基本的-settings-gradle-文件"><a href="#基本的-settings-gradle-文件" class="headerlink" title="基本的 settings.gradle 文件"></a>基本的 settings.gradle 文件</h2><pre><code>include &apos;:app&apos;, &apos;:library&apos;
//包含多个模块即多个module
</code></pre><h2 id="Android-项目级别的-build-gradle-文件"><a href="#Android-项目级别的-build-gradle-文件" class="headerlink" title="Android 项目级别的 build.gradle 文件"></a>Android 项目级别的 build.gradle 文件</h2><pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.

//顶级的构建文件，需要到子项目中添加依赖
//应用配置文件，完事之后可以在全局引用
apply from: &quot;config.gradle&quot;
// 中央远程仓库，兼容maven中心仓库
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath &apos;com.android.tools.build:gradle:2.3.2&apos;//项目使用 gradle:2.3.2 版本 build

        // NOTE: Do not place your application dependencies here; they belong
        // in the individual module build.gradle files
        //不要再这里添加依赖，在各自的module build.gradle中添加依赖
    }
}
//为所有的工程的repositories配置为jcenters，JCenter类似maven库，不需要任何额外的配置
allprojects {
    repositories {
        jcenter()
    }
}

//buildscript 方法是定义了全局的相关属性，repositories定义了jcenter作为仓库。一个仓库代表着你的依赖包的来源，
// 例如maven仓库。dependencies用来定义构建过程。这意味着你不应该在该方法体内定义子模块的依赖包，你仅仅需要定义默认的Android插件就可以了，
// 因为该插件可以让你执行相关Android的tasks。
</code></pre><h2 id="Android-项目-App-级别-build-gradle-文件"><a href="#Android-项目-App-级别-build-gradle-文件" class="headerlink" title="Android 项目 App 级别 build.gradle 文件"></a>Android 项目 App 级别 build.gradle 文件</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">apply plugin: <span class="string">'com.android.application'</span></span><br><span class="line"><span class="comment">//该 plugin 为一个 com.android.application 程序，也就是应用程序，如果你的 plugin 是一个库，那么自然也就是apply plugin: 'com.android.library'</span></span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion rootProject.ext.android.compileSdkVersion <span class="comment">//编译的 SDK API 版本</span></span><br><span class="line">    buildToolsVersion rootProject.ext.android.buildToolsVersion <span class="comment">//构建工具版本</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//默认配置&amp;核心属性，该属性会重写在AndroidManifest.xml中的对应属性</span></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId rootProject.ext.android.applicationId<span class="comment">//配置包名的</span></span><br><span class="line">        minSdkVersion rootProject.ext.android.minSdkVersion <span class="comment">//支持最小的 SDK 版本</span></span><br><span class="line">        targetSdkVersion rootProject.ext.android.targetSdkVersion</span><br><span class="line">        versionCode rootProject.ext.android.versionCode<span class="comment">//版本号</span></span><br><span class="line">        versionName rootProject.ext.android.versionName<span class="comment">//版本名称</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//构建类型，常用的有release和debug两种</span></span><br><span class="line">    buildTypes &#123;</span><br><span class="line">        release &#123;</span><br><span class="line">            minifyEnabled <span class="keyword">true</span> <span class="comment">//是否启动混淆</span></span><br><span class="line">            shrinkResources <span class="keyword">true</span> <span class="comment">//是否移除无用资源文件，shrinkResources依赖于minifyEnabled</span></span><br><span class="line">            <span class="comment">// 混淆文件的位置</span></span><br><span class="line">            <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">repositories </span>&#123;</span><br><span class="line">    jcenter()</span><br><span class="line">    maven &#123; url <span class="string">"https://jitpack.io"</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//依赖管理,可以添加远程依赖 和 本地依赖libs等</span></span><br><span class="line">dependencies &#123;</span><br><span class="line">    <span class="comment">//将libs文件夹中所有的jar文件视为依赖包。</span></span><br><span class="line">    <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></span><br><span class="line"><span class="function">    testCompile 'junit:junit:4.12'</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="comment">//添加依赖包</span></span></span><br><span class="line"><span class="function">    compile <span class="title">project</span><span class="params">(<span class="string">':library'</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    <span class="comment">//依赖远程仓库</span></span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.design</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.cardview</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.circleimageview</span></span><br><span class="line"><span class="function">    compile rootProject.ext.dependencies.sufficientlysecure</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Android-项目-Library-级别-build-gradle-文件"><a href="#Android-项目-Library-级别-build-gradle-文件" class="headerlink" title="Android 项目 Library 级别 build.gradle 文件"></a>Android 项目 Library 级别 build.gradle 文件</h2><p>这里的配置基本上和 App 中的配置一样，之前介绍过，使用 config.gradle 来统一全局变量，就不多介绍了，不知道的可以查看第一篇</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">    apply plugin: <span class="string">'com.android.library'</span></span><br><span class="line"></span><br><span class="line">    android &#123;</span><br><span class="line">        compileSdkVersion rootProject.ext.android.compileSdkVersion</span><br><span class="line">        buildToolsVersion rootProject.ext.android.buildToolsVersion</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        defaultConfig &#123;</span><br><span class="line">            minSdkVersion rootProject.ext.android.minSdkVersion</span><br><span class="line">            targetSdkVersion rootProject.ext.android.targetSdkVersion</span><br><span class="line">            versionCode rootProject.ext.android.versionCode</span><br><span class="line">            versionName rootProject.ext.android.versionName</span><br><span class="line">        &#125;</span><br><span class="line">        buildTypes &#123;</span><br><span class="line">            release &#123;</span><br><span class="line">                minifyEnabled <span class="keyword">false</span></span><br><span class="line">                <span class="function">proguardFiles <span class="title">getDefaultProguardFile</span><span class="params">(<span class="string">'proguard-android.txt'</span>)</span>, 'proguard-rules.pro'</span></span><br><span class="line"><span class="function">            &#125;</span></span><br><span class="line"><span class="function">        &#125;</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    dependencies </span>&#123;</span><br><span class="line">        <span class="function">compile <span class="title">fileTree</span><span class="params">(dir: <span class="string">'libs'</span>, include: [<span class="string">'*.jar'</span>])</span></span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.appcompat</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.gson</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.glide</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.okhttp</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.rxandroid</span></span><br><span class="line"><span class="function">        compile rootProject.ext.dependencies.eventbus</span></span><br><span class="line"><span class="function">    &#125;</span></span><br><span class="line"><span class="function">```    </span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">## so、jar、aar文件</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">jar：只包含了 class 文件与清单文件，不包含资源文件；</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">aar：包含所有资源，class以及res资源文件。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">aar使用</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">当你构建你的library项目，aar文件将会在 build/output/aar/下生成。</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">![image.png]<span class="params">(http://upload-images.jianshu.io/upload_images/<span class="number">877678</span>-b429f767a79b543e.png?imageMogr2/auto-orient/strip%<span class="number">7</span>CimageView2/<span class="number">2</span>/w/<span class="number">1240</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">可以创建一个 aars 文件夹来存放 aar 文件，并将本目录下所有的 aar 文件作为依赖包，例如：</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    repositories </span>&#123;</span><br><span class="line">        flatDir &#123;</span><br><span class="line">            dirs <span class="string">'aars'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">so：用c或者c++写的 library 会被叫做 so 包，Android 插件默认情况下支持<span class="keyword">native</span>包，你需要把.so文件放在对应的文件夹中：</span><br><span class="line"></span><br><span class="line">    app</span><br><span class="line">       ├── AndroidManifest.xml</span><br><span class="line">       └── jniLibs</span><br><span class="line">           ├── armeabi</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           ├── armeabi-v7a</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           ├── mips</span><br><span class="line">           │   └── nativelib.so</span><br><span class="line">           └── x86</span><br><span class="line">               └── nativelib.so</span><br><span class="line"></span><br><span class="line">使用系统的 load 方法，就能加载，有两种方式，这里就不多介绍了，等用到了在说。</span><br><span class="line"></span><br><span class="line">## 其他文件</span><br><span class="line">#### 1、gradle-wrapper.properties</span><br><span class="line"></span><br><span class="line">    #Fri May 26 10:09:38 CST 2017</span><br><span class="line">    distributionBase=GRADLE_USER_HOME</span><br><span class="line">    distributionPath=wrapper/dists</span><br><span class="line">    zipStoreBase=GRADLE_USER_HOME</span><br><span class="line">    zipStorePath=wrapper/dists</span><br><span class="line">    distributionUrl=https\:<span class="comment">//services.gradle.org/distributions/gradle-3.3-all.zip</span></span><br><span class="line">    #声明gradle的目录与下载路径以及当前项目使用的gradle版本，一般不会更改的</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#### 2、proguard-rules.pro</span><br><span class="line"></span><br><span class="line">    每一个 <span class="keyword">module</span> 都会有自己的 proguard-rules.pro 文件，用来编写混淆规则，有一些是不能被混淆的</span><br><span class="line">    例如：一些js注入类是不能被混淆的，否则调用找不到方法。</span><br><span class="line"></span><br><span class="line">```java</span><br><span class="line">    # Add any project specific keep options here:</span><br><span class="line"></span><br><span class="line">    # If your project uses WebView with JS, uncomment the following</span><br><span class="line">    # and specify the fully qualified class name to the JavaScript interface</span><br><span class="line">    # class:</span><br><span class="line">    #-keepclassmembers class fqcn.of.javascript.interface.for.webview &#123;</span><br><span class="line">    #   public *;</span><br><span class="line">    #&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3、gradle-properties"><a href="#3、gradle-properties" class="headerlink" title="3、gradle.properties"></a>3、gradle.properties</h4><p>说到这个文件就要说到之前的 config.gradle 来统一全局变量，config.gradle 只是一种方式，我们还可以在 gradle.properties 中<br>定义常量。</p>
<p>例如(不是本项目中的使用方式，摘自网络)：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># 应用版本名称</span><br><span class="line">VERSION_NAME=<span class="number">1.0</span>.0</span><br><span class="line"># 应用版本号</span><br><span class="line">VERSION_CODE=<span class="number">100</span></span><br><span class="line"># 支持库版本</span><br><span class="line">SUPPORT_LIBRARY=<span class="number">24.2</span>.1</span><br><span class="line"># MIN_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_MIN_SDK_VERSION=<span class="number">14</span></span><br><span class="line"># TARGET_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_TARGET_SDK_VERSION=<span class="number">24</span></span><br><span class="line"># BUILD_SDK_VERSION</span><br><span class="line">ANDROID_BUILD_SDK_VERSION=<span class="number">24</span></span><br><span class="line"># BUILD_TOOLS_VERSION</span><br><span class="line">ANDROID_BUILD_TOOLS_VERSION=<span class="number">24.0</span>.3</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileSdkVersion project.ANDROID_BUILD_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">    buildToolsVersion project.ANDROID_BUILD_TOOLS_VERSION</span><br><span class="line"></span><br><span class="line">    defaultConfig &#123;</span><br><span class="line">        applicationId project.APPLICATION_ID</span><br><span class="line">        versionCode project.VERSION_CODE as <span class="keyword">int</span></span><br><span class="line">        versionName project.VERSION_NAME</span><br><span class="line">        minSdkVersion project.ANDROID_BUILD_MIN_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">        targetSdkVersion project.ANDROID_BUILD_TARGET_SDK_VERSION as <span class="keyword">int</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4、local-properties"><a href="#4、local-properties" class="headerlink" title="4、local.properties"></a>4、local.properties</h4><p>这个比较简单，就是配置项目 NDK、SDK 路径</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文只是简单的介绍了项目中使用的 Gradle 脚本含义和简单用法，只是 Gradle 使用当中的冰山一角，之后会深入打包功能，让项目越来越完善。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://segmentfault.com/a/1190000004229002" target="_blank" rel="noopener">Gradle for Android 第一篇( 从 Gradle 和 AS 开始 )</a></p>
<hr>
<h3 id="SimpleNews-介绍"><a href="#SimpleNews-介绍" class="headerlink" title="SimpleNews 介绍"></a><a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews</a> 介绍</h3><p>A news Android App,based on the Material Design and RxJava 、MVP.Due to changes in the data request logic larger.so,I searate pull out the demo to update, in the original basis to modify the use of RxJava and MVP to rewirete the code starcture.Github <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a></p>
<hr>
<h4 id="SimpleNews-项目的重构之旅其他文章"><a href="#SimpleNews-项目的重构之旅其他文章" class="headerlink" title="SimpleNews 项目的重构之旅其他文章"></a><a href="">SimpleNews 项目的重构之旅其他文章</a></h4><ul>
<li><a href="http://www.jianshu.com/p/d2101119e7b7" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(1) －项目架构定位 &amp; Gradle 全局配置</a></li>
<li><a href="http://www.jianshu.com/p/a658021edea8" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></li>
<li><a href="http://www.jianshu.com/p/de207458f12e" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></li>
<li><a href="http://www.jianshu.com/p/ff777bb4e1d9" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></li>
<li><a href="http://www.jianshu.com/p/3c8c69346acf" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(5) － Android Gradle 打包&amp;混淆应用</a></li>
<li><a href="http://www.jianshu.com/p/37112006f7ed" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(6) － 命名规范 &amp; Android Toolbar</a></li>
<li><a href="http://www.jianshu.com/p/9cc735021b6a" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(7) － 改头换面&amp;深度清理</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/06/02/android/2017-6-1-simpleNews-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/02/android/2017-6-1-simpleNews-3/" itemprop="url">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-02T09:50:00+08:00">2017-06-02</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SimpleNews-系列/" itemprop="url" rel="index"><span itemprop="name">SimpleNews 系列</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="通过需求使用-EventBus"><a href="#通过需求使用-EventBus" class="headerlink" title="通过需求使用 EventBus"></a>通过需求使用 EventBus</h3><p>之前就接触过 EventBus ，只是没有在项目中使用过，只是练习学习使用过 <a href="https://github.com/whiskeyfei/WFAndroidDemo/tree/master/WPEventBusDemo" target="_blank" rel="noopener">WPEventBusDemo</a> ，今天在项目中接入 EventBus 。</p>
<p>最开始的目的是为了做一个完全退出机制，看了网上很多用自己记录 Activity 栈来实现，感觉这种方式太重，因为 Android本身是有这种栈的机制的，我们自己来控制可能会出现各种问题，也查阅了一下使用 EventBus 来实现这个效果。</p>
<p>通过 EventBus 能很简单的能实现完全退出 Activity 效果得益于 EventBus 整个框架的易用性，我们都知道观察者模式也都用过，EventBus 就是基于观察者模式，针对 Android 的发布/订阅的事件总线。</p>
<p>可以代替 Handler,BroadCast等在一些情况下的使用，如果没有这个机制，实现起来可能得通过接口回调，广播接收等方式来实现，特别麻烦，而且扩展性不高，也不够统一。</p>
<p>通过这张图可以看到，订阅者可以订阅多个事件，发送者可以发布任何事件，发布者同时也可以是订阅者。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-dc1dac78577034a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/500" alt="EventBus-引自 Github 官方"></p>
<p>详细的使用可以查看官方文档 <strong><a href="https://github.com/greenrobot/EventBus" target="_blank" rel="noopener">EventBus</a></strong><br>或者查看练习地址 <a href="https://github.com/whiskeyfei/WFAndroidDemo/tree/master/WPEventBusDemo" target="_blank" rel="noopener">WPEventBusDemo</a>，其中也通过自定义来学习和加深 EventBus 印象</p>
<h3 id="举例"><a href="#举例" class="headerlink" title="举例"></a>举例</h3><p>一个 Activity 中的 两个 Fragment 之间做数据通讯，最原始的方式可能是，两个 Fragment 通过 Avtivity 作为中间着进行沟通，但是如果使用 EventBus 就特别简单了，两个 Fragment 想得到什么样类型的响应，就去订阅什么类型的事件，例如：接口加载到数据通过 EventBus 发布一个事件就可以了。</p>
<p>总是能够节省很多代码，也可以解耦代码</p>
<h3 id="退出-App-所有-Activity"><a href="#退出-App-所有-Activity" class="headerlink" title="退出 App 所有 Activity"></a>退出 App 所有 Activity</h3><p>所有的 Activity 都需要继承 BaseActivity，在最外层 Activity 退出的时候，发布一个退出事件即可。</p>
<pre><code>public class BaseActivity extends AppCompatActivity {
    private static final String TAG = &quot;BaseActivity&quot;;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        EventBus.getDefault().register(this);
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        EventBus.getDefault().unregister(this);
    }

    @Subscribe(threadMode = ThreadMode.MAIN)
    public void onMessageEvent(AppExitEvent event) {
        Log.i(TAG,&quot;onMessageEvent:&quot; + event);
        finish();
    }

    @Override
    public boolean dispatchKeyEvent(KeyEvent event) {
        if (event.getAction() != KeyEvent.ACTION_UP) {
            return super.dispatchKeyEvent(event);
        }
        return super.dispatchKeyEvent(event);
    }

}
</code></pre><h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><pre><code>EventBus.getDefault().register(this);//订阅事件
EventBus.getDefault().post(object);//发布事件
EventBus.getDefault().unregister(this);//取消订阅
</code></pre><hr>
<h3 id="SimpleNews-介绍"><a href="#SimpleNews-介绍" class="headerlink" title="SimpleNews 介绍"></a><a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews</a> 介绍</h3><pre><code>A news Android App,based on the Material Design and RxJava 、MVP.Due to changes in the data request logic larger.so,I searate pull out the demo to update, in the original basis to modify the use of RxJava and MVP to rewirete the code starcture.Github [SimpleNews.io](https://github.com/whiskeyfei/SimpleNews.io)
</code></pre><hr>
<h4 id="SimpleNews-项目的重构之旅其他文章"><a href="#SimpleNews-项目的重构之旅其他文章" class="headerlink" title="SimpleNews 项目的重构之旅其他文章"></a><a href="">SimpleNews 项目的重构之旅其他文章</a></h4><ul>
<li><a href="http://www.jianshu.com/p/d2101119e7b7" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(1) －项目架构定位 &amp; Gradle 全局配置</a></li>
<li><a href="http://www.jianshu.com/p/a658021edea8" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></li>
<li><a href="http://www.jianshu.com/p/de207458f12e" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></li>
<li><a href="http://www.jianshu.com/p/ff777bb4e1d9" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></li>
<li><a href="http://www.jianshu.com/p/3c8c69346acf" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(5) － Android Gradle 打包&amp;混淆应用</a></li>
<li><a href="http://www.jianshu.com/p/37112006f7ed" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(6) － 命名规范 &amp; Android Toolbar</a></li>
<li><a href="http://www.jianshu.com/p/9cc735021b6a" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(7) － 改头换面&amp;深度清理</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/06/01/android/2017-6-1-simpleNews-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/android/2017-6-1-simpleNews-2/" itemprop="url">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-01T11:36:30+08:00">2017-06-01</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SimpleNews-系列/" itemprop="url" rel="index"><span itemprop="name">SimpleNews 系列</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="出现情况"><a href="#出现情况" class="headerlink" title="出现情况"></a>出现情况</h3><p>有些情况，项目中的文件是在 build 时候产生的，而且每一次 build 产生的文件并不相同，所以并不需要提交到版本控制，提交这些随环境刚改的文件也是没有实际意义的。</p>
<p>还有一些可能秘钥等文件，是不能随便上传到开源网站的。</p>
<p>在每一次查看状态 git status 时，就会看到一些很乱而又没有用的文件，因此 git 提供一种忽略方式来帮我们解决这种情况。</p>
<p>例如：build 目录下的文件是要忽略的</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-3c504858562afac0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="Android-项目中使用"><a href="#Android-项目中使用" class="headerlink" title="Android 项目中使用"></a>Android 项目中使用</h3><p>在项目根目录新建 .gitignore 文件，我这里以 Android Gradle 项目为例，我们可以发现使用 AS 新建的项目中都是包含 .gitignore 文件的，其中也有一些可忽略的文件。<br>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">*.iml</span><br><span class="line">.gradle</span><br><span class="line">/local.properties</span><br><span class="line">/.idea/workspace.xml</span><br><span class="line">/.idea/libraries</span><br><span class="line">.DS_Store</span><br><span class="line">/build</span><br><span class="line">/captures</span><br><span class="line">.idea</span><br><span class="line">.gradle/</span><br><span class="line">.idea/</span><br></pre></td></tr></table></figure>
<p>注意：这些路径都是相对路径</p>
<h3 id="gitignore-范例"><a href="#gitignore-范例" class="headerlink" title=".gitignore 范例"></a>.gitignore 范例</h3><p>GitHub 已经为我们准备了各种配置文件，只需要组合一下就可以使用了，如果不清楚如何使用改，可以查看：<a href="https://github.com/github/gitignore" target="_blank" rel="noopener">https://github.com/github/gitignore</a></p>
<h3 id="如何生效"><a href="#如何生效" class="headerlink" title="如何生效"></a>如何生效</h3><p>如果之前没有使用过 .gitignore 文件或者更改了 .gitignore文件，需要执行以下方法才能生效：</p>
<p>在repo的根目录下运行：</p>
<pre><code>git rm -r --cached .
git add .
git commit -m “xxx&quot;
</code></pre><p>之前就遇到不生效的问题</p>
<h3 id="gitignore-作用范围"><a href="#gitignore-作用范围" class="headerlink" title=".gitignore 作用范围"></a>.gitignore 作用范围</h3><p>.gitignore 作用范围包含整个文件目录以及其所有子目录<br>每个目录都可以另外 .gitignore 的文件，比如：在 Android 项目中作为 lib 依赖的库同样也需要忽略策略</p>
<hr>
<h3 id="SimpleNews-介绍"><a href="#SimpleNews-介绍" class="headerlink" title="SimpleNews 介绍"></a><a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews</a> 介绍</h3><p>A news Android App,based on the Material Design and RxJava 、MVP.Due to changes in the data request logic larger.so,I searate pull out the demo to update, in the original basis to modify the use of RxJava and MVP to rewirete the code starcture.Github <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a></p>
<hr>
<h4 id="SimpleNews-项目的重构之旅其他文章"><a href="#SimpleNews-项目的重构之旅其他文章" class="headerlink" title="SimpleNews 项目的重构之旅其他文章"></a><a href="">SimpleNews 项目的重构之旅其他文章</a></h4><ul>
<li><a href="http://www.jianshu.com/p/d2101119e7b7" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(1) －项目架构定位 &amp; Gradle 全局配置</a></li>
<li><a href="http://www.jianshu.com/p/a658021edea8" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></li>
<li><a href="http://www.jianshu.com/p/de207458f12e" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></li>
<li><a href="http://www.jianshu.com/p/ff777bb4e1d9" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></li>
<li><a href="http://www.jianshu.com/p/3c8c69346acf" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(5) － Android Gradle 打包&amp;混淆应用</a></li>
<li><a href="http://www.jianshu.com/p/37112006f7ed" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(6) － 命名规范 &amp; Android Toolbar</a></li>
<li><a href="http://www.jianshu.com/p/9cc735021b6a" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(7) － 改头换面&amp;深度清理</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/06/01/android/2017-6-1-simpleNews-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/01/android/2017-6-1-simpleNews-1/" itemprop="url">SimpleNews 项目的重构之旅(1) －项目架构定位 & Gradle 全局配置</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-01T11:27:37+08:00">2017-06-01</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/SimpleNews-系列/" itemprop="url" rel="index"><span itemprop="name">SimpleNews 系列</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="项目架构定位"><a href="#项目架构定位" class="headerlink" title="项目架构定位"></a>项目架构定位</h3><p>终于有时间弄下自己的小项目<a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a> ，之前 frok 过来项目后，只注重了项目的局部模块的设计，没有从整体上考虑过这些架构上的事，后来在工作中接触 Android 插件和组件化开发，渐渐发现之前的项目结构太单一，一般都是根据不同的页面或者业务分几个文件夹，自己模块的逻辑都写在自己的文件夹下，也不会考虑其他复用情况，后续也有一些和其他模块相耦合的代码，根本无法扩展，当然这种方式也只是适用于个人开发，只是因为项目太小而没有察觉出太大问题，一旦项目变得庞大，那真的就已经晚了.</p>
<p>所以，不管项目大还是小，接下来按照组件化方式来重新设计下项目架构，按照团队开发的的模式开发。</p>
<p>网上有很多针对 Android 组件化开发的实施的具体步骤，我这里没有急于按照编译模式的组件化去直接修改，而是先在代码结构和逻辑上做了拆分，在过程中也逐步的抽出一些基础库、依赖库，也就是后面会常说的一个一个组件，因为之后的组件化也是依赖这些最基本的代码。</p>
<h3 id="为什么要进行拆分？"><a href="#为什么要进行拆分？" class="headerlink" title="为什么要进行拆分？"></a>为什么要进行拆分？</h3><p>1、原始方式：</p>
<ul>
<li>存在诸多缺点，虽然开发简单方便，但是后续得不偿失；</li>
</ul>
<p>2、组件化：</p>
<ul>
<li>正好解决原始方式的缺点，可以将业务实现分离，单个业务可以作为模块进行上下依赖;</li>
<li>每一个组件都可以单独运行，各个业务研发同学不互相依赖，也加快了开发的速度，我们知道项目一旦大了，编译都是泪。。</li>
</ul>
<h3 id="拆分方法"><a href="#拆分方法" class="headerlink" title="拆分方法"></a>拆分方法</h3><p>1、新建 Lib moudel 库，将公用的类等逐步移动到依赖库中；<br><br>2、Lib moudel 库中也要分层依赖，为以后完全转成组件做准备；<br><br>3、主 app 中引用遵循分层思想；<br></p>
<h3 id="拆分过程"><a href="#拆分过程" class="headerlink" title="拆分过程"></a>拆分过程</h3><p>看下之前的结构：<br><img src="http://upload-images.jianshu.io/upload_images/877678-652e795b15b93ad3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="之前"></p>
<p>之前的结构是分了很多包，里面基础功能和UI逻辑都是在一起，看着很乱，之后做组建化不方便</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-4029f82ceda912d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="之后"></p>
<p>这只是在抽离过正常的不完整版，有一些已经改掉了。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-6a9750af24be0614.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="目前"></p>
<p>局部做了相应调整，可以看到 app 目录下有两个应用，之后是可以单独运行的业务模块</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-858642afd6efeeac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="app目录"></p>
<h5 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h5><p>前期我这里只是从文件目录进行了整理分割，等整租组件化的时候，只要把这些业务一一移动过去即可，好处是一步一步来改动，避免改动过大，导致项目紊乱，同时也是自己掌握学习的过程。</p>
<h3 id="拆分资源"><a href="#拆分资源" class="headerlink" title="拆分资源"></a>拆分资源</h3><p>资源这部分指 Res 目录下的文件，一般最多的就是布局和图片，我这里是按照业务_类型_功能规范命名，好处是，命名严格，不许出现重复，建议 xml 中的 id 也要严格命名，防止之后出现一些奇怪的问题，最后查起来费劲。</p>
<hr>
<h2 id="Gradle-全局配置"><a href="#Gradle-全局配置" class="headerlink" title="Gradle 全局配置"></a>Gradle 全局配置</h2><p>关于 Gradle 我这里只是说一下我项目中的修改，一些基本介绍暂时没有涉及，之后会做一个基本介绍，一般使用 Android Studio 开发的同学应该不陌生，项目要跑起来都需要使用 Gradle 进行构建，里面有很多很好玩的东东，之后在漫漫细说，今天介绍下如何实现 Gradle 全局配置。</p>
<p>因为由多个 moudle 的原因，gradle 配置文件也就随之增多，所以必须统一管理这些配置，。不然一个一个修改太费劲了。</p>
<p>一般项目结构：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-ed12ad418e5e8f4a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="gradle"></p>
<p>我这里新建了一个 config.gradle 配置和 build.gradle 同级，内容如下：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-5affd54fa584509a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="config.gradle "></p>
<p>然后在项目级别的 build.gradle 文件加上以下配置代码：</p>
<pre><code>apply from: &quot;config.gradle&quot;
</code></pre><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p>在其他 gradle 配置文件中使用：</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-d593f754a1f490db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-dc2a568619d4061d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>这样就能统一管理起来一些配置选项，当然如果你的配置修改了，需要手动同步构建一下。</p>
<p>坑坑坑坑：自定义的配置文件配在根目录的字段不生效，改用数组里面，应该是和系统的冲突了，分开放就好了</p>
<h4 id="完整配置"><a href="#完整配置" class="headerlink" title="完整配置"></a>完整配置</h4><p><a href="https://github.com/whiskeyfei/SimpleNews.io/blob/master/config.gradle" target="_blank" rel="noopener">config.gradle</a></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>以上内容就是项目架构定位 &amp; Gradle 全局配置两部分的优化整理，重构还谈不上，这是一个长期的过程，每做完一点记录一点，对自己也是一个成长，之后还会继续跟进。</p>
<hr>
<h3 id="SimpleNews-介绍"><a href="#SimpleNews-介绍" class="headerlink" title="SimpleNews 介绍"></a><a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews</a> 介绍</h3><p>A news Android App,based on the Material Design and RxJava 、MVP.Due to changes in the data request logic larger.so,I searate pull out the demo to update, in the original basis to modify the use of RxJava and MVP to rewirete the code starcture.Github <a href="https://github.com/whiskeyfei/SimpleNews.io" target="_blank" rel="noopener">SimpleNews.io</a></p>
<hr>
<h4 id="SimpleNews-项目的重构之旅其他文章"><a href="#SimpleNews-项目的重构之旅其他文章" class="headerlink" title="SimpleNews 项目的重构之旅其他文章"></a><a href="">SimpleNews 项目的重构之旅其他文章</a></h4><ul>
<li><a href="http://www.jianshu.com/p/d2101119e7b7" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(1) －项目架构定位 &amp; Gradle 全局配置</a></li>
<li><a href="http://www.jianshu.com/p/a658021edea8" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(2) － 整理项目 .gitignore 文件</a></li>
<li><a href="http://www.jianshu.com/p/de207458f12e" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(3) －EventBus 接入</a></li>
<li><a href="http://www.jianshu.com/p/ff777bb4e1d9" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(4) －Gradle for Android 基础知识汇总</a></li>
<li><a href="http://www.jianshu.com/p/3c8c69346acf" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(5) － Android Gradle 打包&amp;混淆应用</a></li>
<li><a href="http://www.jianshu.com/p/37112006f7ed" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(6) － 命名规范 &amp; Android Toolbar</a></li>
<li><a href="http://www.jianshu.com/p/9cc735021b6a" target="_blank" rel="noopener">SimpleNews 项目的重构之旅(7) － 改头换面&amp;深度清理</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/05/22/life/2017-3-11-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/22/life/2017-3-11-review/" itemprop="url">再说代码 Review</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T14:15:31+08:00">2017-05-22</time>
            

            
            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>两天的 Review 代码，学到很不少东西，记录下</p>
<p>首先列下关键字：</p>
<blockquote>
<p>闭包 、类的单一职责、接口编程、层级依赖 、可扩展、慎用单例、工具类、static</p>
</blockquote>
<p>下面一个一个说，只是站在自己理解的层面上</p>
<h3 id="1、闭包"><a href="#1、闭包" class="headerlink" title="1、闭包"></a>1、闭包</h3><p>我们都知道 Java 提供了四种不同的访问控制修饰符，用来保护对类、变量、方法和构造函数的访问，但是在编写的过程中很容易忽略这些问题。</p>
<p>这次 Review 时进行了着重强调了修饰符问题，虽然看似很小的问题，要想处理好也是不容易的，对整体包设计都是一个考验。</p>
<p>修改建议：<br>      只有本类或者本模块使用的类，尽量在用 default 访问权限也就是 package 级别访问，只有直接供外部使用的类才使用 public 访问控制修饰符，这样也避免别人乱使用，同时保证了唯一的使用出口，也为之后的扩展设计打好基础。</p>
<h3 id="2、类的单一职责"><a href="#2、类的单一职责" class="headerlink" title="2、类的单一职责"></a>2、类的单一职责</h3><p>设计模式中我们常看到单一职责原则，对类对模块同样适用，Review 的时候发现很多毫不相关的功能都写在了一个类中，虽然方便了使用，功能也没有问题，但是后续扩展会引起很多问题，所以还是在编写代码时提前考虑，不然以后还是要修改的，否则就是在为以后挖坑，得不偿失。</p>
<h3 id="3、接口编程"><a href="#3、接口编程" class="headerlink" title="3、接口编程"></a>3、接口编程</h3><p>面向接口编程的概念就不说了，自行google，Review 之前的有些代码是没有面向接口编程设计的，完全是功能累计。</p>
<p>修改建议：<br>          将所有外部调用的方法抽成接口，具体的实现类来实现具体逻辑，供外面使用的都是接口，内部实例可以使用工厂模式来创建，如果是单例模式也要返回接口类，而不是实现类同时要注意上面说的闭包原则。</p>
<p>一切的设计都是围绕接口设计，好处是功能清晰，又能避免外部乱调用。</p>
<h3 id="4、层级依赖"><a href="#4、层级依赖" class="headerlink" title="4、层级依赖"></a>4、层级依赖</h3><p>这里的层级依赖其实就是类代码之间的相互引用依赖，ReView 的是发现，有些类之间相互引用，或者三个类存在相互引用关系，很多交杂在一起的情况。</p>
<p>例如：两个类相互引用<br>     需要查看引用的代码是不是必要的，很多只是为了拿到当前类的某个状态或者其他，通过接口回调可以实现解耦。</p>
<p>多个类相互引用：<br>     针对业务较多的情况，可以先将各个类按照接口抽离，向外提供方法，避免在A类中可以使用到B类除开放的其他方法。</p>
<p>总之宗旨只有一个，尽可能的做到单向依赖。</p>
<h3 id="5、可扩展"><a href="#5、可扩展" class="headerlink" title="5、可扩展"></a>5、可扩展</h3><p>如果你面向接口编程，针对扩展还是比较容易的，也比较容易控制。</p>
<p>我们希望写的是模块而不是顺序执行的程序，模块的东西是否可以简单复用，例如一些重复性的逻辑，是否可以实现自动化控制，里面不关心具体处理流程，而是只关心处理你需要处理的类，也就是更上层的概念，是一种总控的想法。</p>
<p>例如：你有10个Task，你需要的是写出处理 task 流程的模块，而不是处理 task 里面的逻辑，如果将来增加到20个 Task，你的模块也会自适应，这就是目的。</p>
<h3 id="6、慎用单例："><a href="#6、慎用单例：" class="headerlink" title="6、慎用单例："></a>6、慎用单例：</h3><p>代码中有地方很多单例模式，看上去使用了模式之类的设计会好，但是有一些并不需要使用单例模式就能解决，可能简单 new 一个类就可以，并不需要保存什么状态。</p>
<h3 id="7、工具类"><a href="#7、工具类" class="headerlink" title="7、工具类"></a>7、工具类</h3><p>好多打着工具类的旗号，里面就一两个方法，而且还是给自己模块使用，完全不是工具类的概念，这种方式尽早替换修改，移到自己的模块出来即可。</p>
<h3 id="8、static"><a href="#8、static" class="headerlink" title="8、static"></a>8、static</h3><p>static 方式不受限制，直接类名点一下就可以使用了，这就会导致很多地方使用、更改，就容易出现问题。</p>
<p>有时候一些类使用现用现创建都可以。</p>
<p>随想随写</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/05/22/android/2017-5-16-registry-of-singleton/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/22/android/2017-5-16-registry-of-singleton/" itemprop="url">Registry of Singleton 模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T13:49:50+08:00">2017-05-22</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Android/" itemprop="url" rel="index"><span itemprop="name">Android</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>不知道大家平时有没有遇到大量使用单例类的情况，当我们的项目变得庞大，人员分组变的复杂，出现各种分支，简单易用的单例类使用就会泛滥。</p>
<p>这里总结下项目中遇到并使用的方法，基本思路都是 Registry of Singleton 模式，将单例类使用数据结构保存起来，通过Key Value 一一对应。</p>
<h3 id="Reflection-机制"><a href="#Reflection-机制" class="headerlink" title="Reflection 机制"></a>Reflection 机制</h3><pre><code>public class SingletonRegistry {
    private static Map&lt;String, Object&gt; registry = new HashMap&lt;String, Object&gt;();

    private SingletonRegistry() {}

    public static Object getInstance(String classname) {
        Object singleton = registry.get(classname);

        if(singleton != null) {
            return singleton;
        }
        try {
            singleton = Class.forName(classname).newInstance();
        }
        catch(Exception e) {
            throw new RuntimeException(e);
        }

        registry.put(classname, singleton);

        return singleton;
    }
</code></pre><h3 id="Registry-机制"><a href="#Registry-机制" class="headerlink" title="Registry 机制"></a>Registry 机制</h3><pre><code>public class SingletonRegistry {
    private static Map&lt;String, Object&gt; registry = new HashMap&lt;String, Object&gt;();
    private static Singleton instance;

    private SingletonRegistry() {}

    public static void register(String name, Object singleton) {
        registry.put(name, singleton);
    }

    public static Object getInstance(String classname) {
        return registry.get(classname);
    }
</code></pre><p>以上两种方式是最简单通用的方式，但是使用object作为参数难免会觉得无法控制无法感知，所就利用以上思想就有了现在的方式。</p>
<h3 id="接口包装"><a href="#接口包装" class="headerlink" title="接口包装"></a>接口包装</h3><ul>
<li>基本思路同上，注册方式来保证 key value 一一对应</li>
<li>面向接口   </li>
<li>对每一个对应的单例类接口自行处理 object 转化类型，也就是转成当前的类型</li>
<li>封装 key 对应的工具类，统一入口获取单例类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonManager</span> </span>&#123;</span><br><span class="line">	 <span class="keyword">private</span> <span class="keyword">static</span> SingletonManager mInstance = <span class="keyword">new</span> SingletonManager();</span><br><span class="line"></span><br><span class="line">	 <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, ISingletonWrapper&gt; mMap = <span class="keyword">new</span> HashMap&lt;String, ISingletonWrapper&gt;();</span><br><span class="line"></span><br><span class="line">	 <span class="function"><span class="keyword">private</span> <span class="title">SingletonManager</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingletonManager <span class="title">get</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		  <span class="keyword">return</span> mInstance;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">register</span><span class="params">(String key, ISingletonWrapper ifWrapper)</span> </span>&#123;</span><br><span class="line">		  mMap.put(key, ifWrapper);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">unRegister</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">		  mMap.remove(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">	 <span class="function"><span class="keyword">public</span> ISingletonWrapper <span class="title">get</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">		  <span class="keyword">return</span> mMap.get(key);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ISingletonWrapper 是个接口 只有一个方法，返回 object</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ISingletonWrapper</span> </span>&#123;</span><br><span class="line">    <span class="function">Object <span class="title">getInterface</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>剩余就是自由发挥了，对 object 做一个封装，让外界感知都是接口就OK了</p>
<p>其余就是对这部分使用的扩展，本组大神压阵，代码就不贴了</p>
<p>大致提供下思路：</p>
<p>比如单例类接口为 ITextProvider，将 ITextProvider 继承 ISingletonWrapper 接口，同时声明一个内部类实现 ITextProvider，构造一个静态方法将 object 和 ITextProvider 做强转匹配即可，外层工具类随便写就行了，只能到这了。。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><ul>
<li><a href="https://openhome.cc/Gossip/DesignPattern/RegistryOfSingleton.htm" target="_blank" rel="noopener">Registry of Singleton 模式</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/05/22/life/2017-5-16-review/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/22/life/2017-5-16-review/" itemprop="url">近况 2017.05.16</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T13:37:16+08:00">2017-05-22</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>对 没错 又是近况，去年八月份写过一篇近况，这一晃半年多又过去了，其实无非也还是那几件事，上次谈的是 Code Review、思考工作、运动，这次都有，顺便加上积累、理财和懒惰。</p>
<p>所以聊聊这几个关键字： Code Review、思考、运动、积累、理财、懒惰。</p>
<h4 id="1、Code-Review"><a href="#1、Code-Review" class="headerlink" title="1、Code Review"></a>1、Code Review</h4><p>老生常谈的话题，只要从事编码工作，就无法逃离这个话题，我们经常听到”提交代码前要找人 Review 下“这样的声音，然而往往坚持不了几次就拉倒了，自认为写的逻辑没有问题，出问题结果恍然大悟，感叹原来还有这一层逻辑要处理。</p>
<p>上次说的编码规范、风格、重复等方面，这次就不细说了，说多了就烦了，这些原本就是应该掌握的东西，是本能。上次也说了可扩展、可测试，这次说说易用、兼容、出错排查，顺便再说说扩展。</p>
<p>易用：就是方便使用，提供的功能模块外部调用是否方便，是否轻松调用一个方法就可以了，在写模块的时候，首先要将自己作为一个第三方使用者来思考，思考我想这个应该怎么用才最简单最方便最安全。</p>
<p>兼容：通常是向上向下兼容，或者兼容最低版本，这里就会涉及到框架设计知识，注意变的东西要统一，不能随便更改，更改能及时发现，对比也能特别鲜明，和面向接口编程思想是类似的，接口提供哪些方法就只能调到这些方法，其他的不能使用。</p>
<p>出错排查：这段时间有很多不知道怎么处理的问题，好在最后都处理掉了，之前写过《谈对接》一文，就是说为了防止出问题，如何在一些对接事情做的严谨，我的建议是从大往小、从表征到本质，如果有出错过程log配合最好。对于不知道是哪出错的问题，就采用排除法一一排除，缩小出错代码范围，逐步调试。</p>
<p>扩展：这次领会到的有点随意拼接的意思，就是这个模块是一个完整的功能模块，但是同时又是又不同的小模块组合而成，而彼此依赖的只有接口，各个模块应该感知不到具体的实现，而只是我需要这个结果，你给我提供就好，具体怎么实现我不关心，及时更换实现过程，其他模块也丝毫感知不到。另外每一个小模块又可以当一个小功能来使用，这是我认为最有意思的的地方。跟七巧板似的，随意组合随意拼接成不同的团图案。</p>
<h4 id="2、思考"><a href="#2、思考" class="headerlink" title="2、思考"></a>2、思考</h4><p>思考是必须要的，不然就真的死掉了，去思考如何把性能提升10ms，如果将页面载入速度提高5ms等等。就是要去思考如何越来越好，然后找几个点就开始干，2017 不就是应该撸起袖子就是干吗！！</p>
<h4 id="3、积累"><a href="#3、积累" class="headerlink" title="3、积累"></a>3、积累</h4><p>有时候到写周报的时候才发现不知道这周干了啥，然后就一个劲的回忆，我也这么干过，所以好记性不如烂笔杆，适当的使用工具来帮助自己记录平时，我是使用Tower来记录每一件事每一个问题每一个bug，完成就划掉，同时将解决问题中学到的只是积累的印象笔记中，抽空要将这写东西在总结在升华，这就是我目前的方式。</p>
<h4 id="4、懒惰"><a href="#4、懒惰" class="headerlink" title="4、懒惰"></a>4、懒惰</h4><p>很伤心我也很懒惰，至少在学英语这件事上，我已经败了，掏了钱没去上课没去学习，课下也没有去练习，这方面确实懒。。。根本原因还是没有找到兴趣点，原因我也知道，只是不知道怎么解决，碎事情很多，我知道这不是理由，但是我还是败给了懒惰，谁都不能怨。</p>
<h4 id="5、理财"><a href="#5、理财" class="headerlink" title="5、理财"></a>5、理财</h4><p>你不理财，财不离你，善用每一分去撬动另一分，别的不多说，现在理财文章一对一对的，最重要是要有理财意识。</p>
<h4 id="6、运动"><a href="#6、运动" class="headerlink" title="6、运动"></a>6、运动</h4><p>2017 恢复打羽毛球，很开森，平均一周两次，以后要多多练习，自由泳也在进行中，之后继续。</p>
<p>有进步也有退步，2017 着重要加强核心竞争力，女朋友常说的：你可以的，不管真的能不能要相信自己可以的。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/05/22/life/2017-10-14-life_ten/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/22/life/2017-10-14-life_ten/" itemprop="url">打球这十年</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-22T13:37:16+08:00">2017-05-22</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>打球这十年，更准确说是，打羽毛球这十年。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-8bcdd0af6bac0651.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/400" alt=""></p>
<p>十月一过后的北京简直冻死了，还没好好感受下秋天的温度就直接冬天了，又是周五，可是因为有伤不能打球。</p>
<p>此情此景，真想吟诗一首，想想打羽毛球已经10个年头了，啊、啊、啊 时间过的真快……<br><!-- break --><br>每个人小时候或多或少都玩过羽毛球、乒乓球等，我第一次接触正式的羽毛球是在初中毕业的那个暑假，中考完假期很长，跟着爸妈每天早上去一个大棚打球，对，就是一个大棚，还记得那会还在室外，用竹竿搭了一个简易的羽毛球网，用砖块画好羽毛球场地边线，就开始打了。</p>
<p>2007年那会县城里还没有羽毛球馆，都是在公园随意打打这种，我们称之为“野球”，我爸妈那波人应该是县里最开始打球的，后来队伍越来越壮大，发展到三四十号人，小小的大棚已经无法容纳那么多人就开始分分散散的打了，不过也还是在室外自己划线打。</p>
<p>之后就上了高中，开学时也带去了羽毛球拍，第一只正式的尤尼克斯羽毛球拍，当时觉得好贵好专业的感觉，08年上高二的时候，学校里正好有羽毛球的选修课，就义无反顾的报名了，不过那会场地也是在室外，每周就盼着上体育课，不过没有几次能好好打的，因为室外风大。。。那会也买了一个简易羽毛球网，在周末和几个好友随意打上一通，出出汗也是很爽的，后来听说学校盖了球馆等运动场馆，没赶上好时候啊。</p>
<p>高中暑假在家，都是跟着爸妈打球，后来他们找了一个朋友公司的厂房，可能暂时没用，就在那里画了十几个场地，也就是那几个暑假，是我羽毛球技术增长最快的时候，虽然没有正规运动员知道，不过我跟着视频教程学习，也算是入门了，最先看的是前国手、前世界冠军李玲蔚的羽毛球系列教程，可能大多数人没有听过，89年就退役了，视频也的清晰度虽然一般，但是讲的很慢很好，一点是一点，就这样没事就看，打球的时候想着去模仿，慢慢就成了自己的动作。</p>
<p>但是那会还没有真正从内心喜欢打球，只是暑假在家没事去运动下，没有想到之后会这么喜欢。</p>
<p>转眼毕业了，上大学了，作为学生党也没有那么富裕的零花钱，买了一双差不多的羽毛球鞋，到现在有时候还穿这打，大学的前半程都是在操场上打野球，三五个好友，晚上在操场打球，虽说没有网带，但是多拍不掉也很不错了，还有人围观呢，哈哈。也就大三才开始去球馆打球，后来才知道学院里有羽毛球社团的组织，不过是在总校区，也没有参加，之后在球馆里打才是真正喜欢上羽毛球，想去练好它，期间没事就看羽毛球比赛，那会基本上常常比赛都不拉下，细细观察，每个月基本上都有比赛，什么苏迪曼杯、世锦赛、大师赛、马来西亚羽毛球公开赛等等。</p>
<p>也就是在这个过程中，见证了中国羽毛球国家队的崛起，林丹、谌龙、张楠、赵芸蕾、蔡赟、傅海峰（风云组合）、等等，当然李宗伟也不能拉下，这也是一个传奇人物，后面再说。</p>
<p>中间回家，县里已经有羽毛球馆了，打球的还是我爸妈那拨人，现在县城里有3、4家，不过可能不太能挣钱，毕竟花钱去场地打球还要消费还需要慢慢接受的，现在他们有固定的模式，都有协会了，每天都能打上一次。</p>
<p>毕业了，上班了，才知道能有大把的时间去运动真是一件奢侈的事情，公司是每周五有羽毛球活动，到现在已经参加三年了，所以还是劝在大学期间能运动尽量去运动，你会发现大学期间你的体能也许是你一生最好的时候，当然不排除之后健身自我提升。</p>
<p>之后浪迹在北京的个大羽毛球场地，去的最多的还是学校里面的球馆，周末能打一场球，真是乐此不疲。要知道球是要打起来才有意思。</p>
<p>工作的第二年，基本上一年没打球，可能真是体质不行了，脚受伤，由于误了最佳的治疗时间，导致我后面各种找地方看脚上，其实也不是什么大问题，用名词解释就是积液＋软组织损伤，我说下伤的过程，起初就是打完球右脚后脚跟以上和小腿肚以下有点酸胀，期间没有注意，以为是打累了正常，貌似几周之后，走路就开始疼，以至于后面走一公里就不能再走了，然后去医院看医生，经历了被诊断为跟腱炎。。之后吃药不行。。做核磁。。说有积液。西医的结果就是没事，回去多休息，期间也是不了解，后来同事介绍去北医三院查查，之后由于很难挂上号，也就拉倒了，偶然听另一个朋友说起中医正骨，我当时感觉自己太傻了，就没想着去看看中医，果然是错位了，，中医一摸就能摸出来，是脚踝很小的错位，不知道拍的那么贵的核磁医生看不出来。。。我也是醉醉的，中医说要是当时就来看，一副膏药就好了，也不知道当时真的是傻了我。。。在休息养了很久之后，尝试去打球了，但总有一些顾虑，明显感觉手感不如以前了，后来还是不太数据，也就暂停打球了，再过了一个冬天之后，走路还是觉得不太舒服，不知道是不是心里作用，后来索性不管了，就这样去慢慢恢复运动，后来真的是好了很多，现在脚感觉很好。不会有难受的感觉了。</p>
<p>在经历过伤病之后，领悟到一点，就是不管什么时候打球，一定要热身，10分钟的热身，好好去拉伸各个部位，特别是脚踝，手臂，多拉拉高远球，让身体感觉已经热了，才去打球，这一点一定要坚持，我期间还有几次是没有热身就上次去打球，也有或多或少的受伤，可能是比较瘦，没有更多的肌肉和组织去抵挡碰撞。</p>
<p>现在是左脚脚趾骨错位。。。也是没有热身，跑动太剧烈导致，这次及时治疗，目前已在恢复当中，不久就可以付出了，以后有时间要系统学习一下羽毛球步伐等。</p>
<p>说了这么多，光说了伤痛，其实打球是一件特别开心和兴奋的事情，烦心的时候去打打球，暂时抛开问题，有时候还能有意外收获。不过也要良性的去运动，不能突然去剧烈运动，以免产生不适效果。</p>
<p>那么打球有什么好处呢？</p>
<p>打球使我认识了很多爱打球的小伙吧，每周约上一场球，出出汗很开心。<br>打球增强了我的反应能力，真的是眼疾手快。<br>打球增强了体能，多拍还是很消耗体能的。<br>打球给了我自信。</p>
<p>最开始入门用胜利9500，目前在用ZF2，适合单打，之前用9900，适合双打。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-a384951f951132fc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540" alt="ZF2"></p>
<p>有没有很骚粉，哈哈，故意的。</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-71b5e69d97371548.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/540" alt="五四球馆"></p>
<p>每场球都是一个新的开始，每个球又是一个起点。就这样我和羽毛球结下不解之缘，我想在以后日子里，我会一直热爱羽毛起，一直打下去。。</p>
<p>怀着回忆的心情，写下这片《打球这十年》，也算是简简单单的回忆录吧。</p>
<p>祝大家周末愉快。</p>
<p>最后致敬英雄！！在我心里，他们没有输和赢！！</p>
<p><img src="http://upload-images.jianshu.io/upload_images/877678-e0bb6c595287e4aa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="林丹&amp;李宗伟"></p>
<hr>
<p>之后也会写一写关于伤痛恢复的文章，以及自己日常恢复的内容，还想聊一聊喜欢的运动员，如果你也爱好羽毛球，欢迎勾搭，没准下一个周末就在一个球场打球了。</p>
<p>重要的是运动快乐！！</p>
<hr>
<p>2018 已经在球场上飞起来了</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2017/01/17/tech/2017-1-16-gson_translate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/17/tech/2017-1-16-gson_translate/" itemprop="url">Gson 系列文章翻译 End</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-17T20:53:59+08:00">2017-01-17</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/日常/" itemprop="url" rel="index"><span itemprop="name">日常</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>截止到目前为止，Gson 系列文章翻译就告一段落了，原系列有一些没更新完，我这里将持续跟踪，如果有更新，我这里也会及时更新。</p>
<p>翻译比较粗糙，只是把功能点按照自己的理解说了一下，如有翻译的不太清楚，大家多多包含多多指正！谢谢！</p>
<p>即将开始新的系列，加油！</p>
<p>练习代码已上传 Github <a href="https://github.com/whiskeyfei/Gson-Review" target="_blank" rel="noopener">https://github.com/whiskeyfei/Gson-Review</a> 可自行查看。</p>
<h2 id="Gson-系列文章翻译回顾"><a href="#Gson-系列文章翻译回顾" class="headerlink" title="Gson 系列文章翻译回顾"></a>Gson 系列文章翻译回顾</h2><p>1、<a href="http://www.jianshu.com/p/a03bc97875b8" target="_blank" rel="noopener">Gson - Java-JSON 序列化和反序列化入门</a><br><br>2、<a href="http://www.jianshu.com/p/a03bc97875b8" target="_blank" rel="noopener">Gson - 映射嵌套对象</a><br><br>3、<a href="http://www.jianshu.com/p/9a4dcd436d7f" target="_blank" rel="noopener">Gson - Arrays 和 Lists 映射对象</a><br><br>4、<a href="http://www.jianshu.com/p/338a9663f9c0" target="_blank" rel="noopener">Gson - Map 结构映射</a><br><br>5、<a href="http://www.jianshu.com/p/215708d00015" target="_blank" rel="noopener">Gson - Set 集合映射</a><br><br>6、<a href="http://www.jianshu.com/p/43e18d774296" target="_blank" rel="noopener">Gson - 空值映射</a><br><br>7、<a href="http://www.jianshu.com/p/cf326567f759" target="_blank" rel="noopener">Gson Model Annotations - 如何使用 @SerializedName 更改字段的命名</a><br><br>8、<a href="http://www.jianshu.com/p/dcfe792ba71d" target="_blank" rel="noopener">Gson Model Annotations - @SerializedName 匹配多个反序列化名称</a><br><br>9、<a href="http://www.jianshu.com/p/c8745b5021b9" target="_blank" rel="noopener">Gson Builder - 基础和命名规则</a><br><br>10、<a href="http://www.jianshu.com/p/a6fa9e7fad63" target="_blank" rel="noopener">Gson Builder - 序列化空值</a><br><br>11、<a href="http://www.jianshu.com/p/7a98089a2b0d" target="_blank" rel="noopener">Gson Builder - 忽略策略</a><br><br>12、<a href="http://www.jianshu.com/p/6bcb310873bd" target="_blank" rel="noopener">Gson Builder - Gson Lenient 属性</a><br><br>13、<a href="http://www.jianshu.com/p/83eb1b2bc119" target="_blank" rel="noopener">Gson Builder - 特殊类型 Floats &amp; Doubles</a><br><br>17、<a href="http://www.jianshu.com/p/146bd51d111f" target="_blank" rel="noopener">Gson Builder - 如何使用 @Expose 忽略字段</a><br><br>19、<a href="http://www.jianshu.com/p/64d8993bedd7" target="_blank" rel="noopener">Gson Advanced - 映射枚举类型</a><br><br>20、<a href="http://www.jianshu.com/p/bcfa456ff0e6" target="_blank" rel="noopener">Gson Advanced - 映射循环引用</a><br><br>21、<a href="http://www.jianshu.com/p/865c494d86db" target="_blank" rel="noopener">Gson Advanced - 泛型</a><br><br>22、<a href="http://www.jianshu.com/p/7537c20d2c8a" target="_blank" rel="noopener">Gson Advanced - 简单自定义序列化 (Part 1)</a><br><br>24、<a href="http://www.jianshu.com/p/c18e1d49f3aa" target="_blank" rel="noopener">Gson Advanced - 自定义反序列化基础</a><br><br>25、<a href="http://www.jianshu.com/p/f4ea7dffd369" target="_blank" rel="noopener">Gson Advanced - 自定义对象实例创建</a><br><br>26、<a href="http://www.jianshu.com/p/5249ce22ae69" target="_blank" rel="noopener">Gson Advanced - 通过 @JsonAdapter 自定义(反)序列化过程</a><br><br>32、<a href="http://www.jianshu.com/p/006c9eef0c70" target="_blank" rel="noopener">Practical Gson - 如何解析多态对象</a></p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://whiskeyfei.github.io/2016/04/12/life/2016-11-08-cooperate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="無名">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/face.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="無名小子的杂货铺">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/12/life/2016-11-08-cooperate/" itemprop="url">对接那点事</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-04-12T11:14:39+08:00">2016-04-12</time>
            

            
            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/生活/" itemprop="url" rel="index"><span itemprop="name">生活</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="谈对接"><a href="#谈对接" class="headerlink" title="谈对接"></a>谈对接</h3><p>说起对接，开发起来哪哪都是对接，自己逻辑对接，别人模块对接，后台接口对接等等，凡事出现功能交集，或者需要别的提供的接口时都会产生对接情况。</p>
<p>我们都事故期望对接完美，什么都不缺，可往往是以愿违，或多或少的问题总是阻碍开发的进度，不仅如此还有可能陷入纠结和无语当中，今天来说说对接那点事，也是自己在工作中的一些体会，做个记录，希望有所帮助。</p>
<h3 id="故事"><a href="#故事" class="headerlink" title="故事"></a>故事</h3><p>之前接手一个模块，数据部分设计到好几个模块，其实就是好几个人，操作数据的人多，所以出问题的地方就很多，不出问题还好，一出问题就各种推……总之很无语，所以就思考，如何在出问题的情况下，迅速排查出问题原因，用事实说话，这样于人于己都方便。</p>
<h3 id="明确细节"><a href="#明确细节" class="headerlink" title="明确细节"></a>明确细节</h3><p>1、明确功能<br>    在开始做需求功能的时，一定要确定自己开发所需的数据、UI资源是否能按时提供或者给出的格式，方便预留。</p>
<p>2、明确出错<br>    考虑各种出错的情况，明确哪些出错是自己的，哪些是其他模块的。</p>
<p>3、明确定位<br>    在关键的位置添加log，根据响应的出错等情况，区分类型，定位到具体模块。</p>
<h3 id="如何避免"><a href="#如何避免" class="headerlink" title="如何避免"></a>如何避免</h3><ul>
<li>自己的模块尽量提供最简单的用法，谁用都方便；</li>
<li>和测试提前沟通，不同人理解产品文档可能存在偏差，注意就好；</li>
<li>确保测试环境配置没有问题，一些需要各种条件才能正常测试；</li>
<li>给自己的模块做各种case测试；</li>
</ul>
<h3 id="如何排查"><a href="#如何排查" class="headerlink" title="如何排查"></a>如何排查</h3><ul>
<li>根据页面显示来判断；</li>
<li>查看是不是自己模块的问题；</li>
<li>然后根据关键log标识排查接口问题；</li>
</ul>
<h3 id="说到最后"><a href="#说到最后" class="headerlink" title="说到最后"></a>说到最后</h3><p>我所说的都是一些小的对接，不过还是想开开心心高效的工作，另外说点大的，跨组、跨部门、乃至跨公司合作都类似，只是复杂程度不同，针对双方列出来的功能一定要逐一核对，明确功能。</p>

          
        
      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/face.jpg"
                alt="無名" />
            
              <p class="site-author-name" itemprop="name">無名</p>
              <p class="site-description motion-element" itemprop="description">记录学习、生活</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">46</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">31</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/whiskeyfei" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:whiskeyfei@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.jianshu.com/u/fa272f63280a" target="_blank" title="简书"><i class="fa fa-fw fa-google"></i>简书</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/whiskeyfei" target="_blank" title="Twitter"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2014 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">無名</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.5</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.5"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.5"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.5"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.5"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.5"></script>



  



	





  





  










  





  

  

  

  

  
  

  

  

  

  

</body>
</html>
